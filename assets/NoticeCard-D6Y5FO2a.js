import{j as r,a6 as d,r as n,a8 as x,a0 as i,ab as R,ac as p,a7 as N,af as I}from"./index-C1QwAi2s.js";import{r as f,k as h,l as W,P as C,I as w,C as y}from"./App-DZK4CLd6.js";var l={},_=h;Object.defineProperty(l,"__esModule",{value:!0});var g=l.default=void 0,D=_(f()),k=r;g=l.default=(0,D.default)((0,k.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");const P=()=>{const{t}=d(),e=W(),{openUrl:a}=n.useContext(x),o=()=>e?e.WTCSGNL&&T.includes(e.WTCSGNL.code)?!0:!!(e.WRAIN&&A.includes(e.WRAIN.code)):!1;return navigator.userAgent!=="prerendering"&&o()?r.jsxs(C,{variant:"outlined",sx:E,onClick:()=>a(t("bad-weather-link")),children:[r.jsx(g,{color:"error"}),r.jsx(i,{children:t("bad-weather-text")})]}):null},T=["TC8NE","TC8SE","TC8NW","TC8SW","TC9","TC10"],A=["WARINR","WRAINB"],E={borderRadius:t=>t.shape.borderRadius,cursor:"pointer",px:2,py:1,display:"flex",alignItems:"center",textAlign:"left",gap:1},J=()=>{const{t}=d(),{db:{updateTime:e},renewDb:a}=n.useContext(R),o=n.useMemo(()=>Date.now()>e+28*24*3600*1e3,[e]);return navigator.userAgent!=="prerendering"&&o?r.jsx(p,{sx:O,onClick:a,children:r.jsx(i,{children:t("db-renew-text")})}):null},O={display:"flex",justifyContent:"center",flex:1,width:"100%",p:2,borderStyle:"solid",borderWidth:1,borderRadius:t=>t.shape.borderRadius/2,cursor:"pointer"};var c={},$=h;Object.defineProperty(c,"__esModule",{value:!0});var v=c.default=void 0,z=$(f()),B=r;v=c.default=(0,z.default)((0,B.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");const G=()=>{const t=N(),[e,a]=n.useState(null),[o,b]=n.useState(localStorage.getItem("closeNoticeContent")??""),{openUrl:u}=n.useContext(x);n.useEffect(()=>{fetch("https://notice.hkbus.app/notice.json").then(s=>s.json()).then(s=>a({...s,endDate:new Date(s.endDate)}))},[]);const j=n.useCallback(()=>{e!==null&&(I()&&!e.enableLinkInIos||u(e.link[t]))},[t,u,e]),S=n.useCallback(()=>{e&&(localStorage.setItem("closeNoticeContent",JSON.stringify(e.content)),b(JSON.stringify(e.content)))},[e]);return e===null||o===JSON.stringify(e.content)||!e.isShown||e.endDate<new Date?null:r.jsxs(C,{variant:"outlined",sx:L,children:[r.jsx(v,{color:"warning"}),r.jsx(p,{onClick:j,sx:{cursor:"pointer"},children:e.content[t].map((s,m)=>r.jsx(i,{variant:"subtitle2",sx:{height:"3.14em",overflowY:"auto"},children:s},`_notice-${m}`))}),r.jsx(w,{size:"small",onClick:S,children:r.jsx(y,{})})]})},L={borderRadius:t=>t.shape.borderRadius,px:2,py:1,alignItems:"center",textAlign:"left",gap:2,display:"flex"};export{P as B,J as D,G as N};
