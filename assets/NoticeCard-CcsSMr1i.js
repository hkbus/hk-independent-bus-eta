import{j as r,a4 as d,r as n,a6 as x,$ as i,a9 as m,aa as p,a5 as N,ad as I}from"./index-Dj2tWGOI.js";import{r as f,i as h,j as W,P as C,I as y,C as _}from"./App-KQaxnoWy.js";var l={},w=h;Object.defineProperty(l,"__esModule",{value:!0});var g=l.default=void 0,D=w(f()),T=r;g=l.default=(0,D.default)((0,T.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");const P=()=>{const{t}=d(),e=W(),{openUrl:a}=n.useContext(x),o=()=>e?e.WTCSGNL&&k.includes(e.WTCSGNL.code)?!0:!!(e.WRAIN&&A.includes(e.WRAIN.code)):!1;return navigator.userAgent!=="prerendering"&&o()?r.jsxs(C,{variant:"outlined",sx:E,onClick:()=>a(t("bad-weather-link")),children:[r.jsx(g,{color:"error"}),r.jsx(i,{children:t("bad-weather-text")})]}):null},k=["TC8NE","TC8SE","TC8NW","TC8SW","TC9","TC10"],A=["WARINR","WRAINB"],E={borderRadius:t=>t.shape.borderRadius,cursor:"pointer",px:2,py:1,display:"flex",alignItems:"center",textAlign:"left",gap:1},J=()=>{const{t}=d(),{db:{updateTime:e},renewDb:a}=n.useContext(m),o=n.useMemo(()=>Date.now()>e+28*24*3600*1e3,[e]);return navigator.userAgent!=="prerendering"&&o?r.jsx(p,{sx:$,onClick:a,children:r.jsx(i,{children:t("db-renew-text")})}):null},$={display:"flex",justifyContent:"center",flex:1,width:"100%",p:2,borderStyle:"solid",borderWidth:1,borderRadius:t=>t.shape.borderRadius/2,cursor:"pointer"};var c={},O=h;Object.defineProperty(c,"__esModule",{value:!0});var v=c.default=void 0,z=O(f()),B=r;v=c.default=(0,z.default)((0,B.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");const G=()=>{const t=N(),[e,a]=n.useState(null),[o,j]=n.useState(localStorage.getItem("closeNoticeContent")??""),{openUrl:u}=n.useContext(x);n.useEffect(()=>{fetch("/notice.json").then(s=>s.json()).then(s=>a({...s,endDate:new Date(s.endDate)}))},[]);const b=n.useCallback(()=>{e!==null&&(I()&&!e.enableLinkInIos||u(e.link[t]))},[t,u,e]),S=n.useCallback(()=>{e&&(localStorage.setItem("closeNoticeContent",JSON.stringify(e.content)),j(JSON.stringify(e.content)))},[e]);return e===null||o===JSON.stringify(e.content)||!e.isShown||e.endDate<new Date?null:r.jsxs(C,{variant:"outlined",sx:L,children:[r.jsx(v,{color:"warning"}),r.jsx(p,{onClick:b,sx:{cursor:"pointer"},children:e.content[t].map((s,R)=>r.jsx(i,{variant:"subtitle2",children:s},`_notice-${R}`))}),r.jsx(y,{size:"small",onClick:S,children:r.jsx(_,{})})]})},L={borderRadius:t=>t.shape.borderRadius,px:2,py:1,alignItems:"center",textAlign:"left",gap:2,display:"flex"};export{P as B,J as D,G as N};
